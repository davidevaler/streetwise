<div class="box expand">
  <link rel="stylesheet" href="/css/sidebar.css">
  <link rel="stylesheet" href="/css/map.css">

  <div class="sidebar">
    <h3>Filtri</h3>
    <div class="box-container">
    <ul>
      <li>
        <label for="filtroTratti">
          <input type="checkbox" id="filtroTratti" name="filtroTratti">
            ğŸ›£ï¸ Mostra Strade
          </label>
      </li>
      <li>
        <label for="filtroIncidenti">
          <input type="checkbox" id="filtroIncidenti" name="filtroIncidenti">
            âš ï¸ Mostra Incidenti
          </label>
          <!-- Sottofiltro per l'anno degli incidenti -->
          <div id="subfilter-incidenti" class="subfilter hidden">
            <label for="filtroAnno">
              ğŸ“… Anno:
              <select id="filtroAnno" name="filtroAnno">
                <option value="all">Tutti gli anni</option>
                <!-- Le opzioni verranno popolate dinamicamente -->
              </select>
            </label>
          </div>
      </li>
      
      <li>
        <label for="filtroTrasporti">Add commentMore actions
          <input type="checkbox" id="filtroTrasporti" name="filtroTrasporti">
          ğŸšŒ Trasporti Pubblici
        </label>
        <!-- Sottofiltri per i trasporti -->
        <div id="subfilter-trasporti" class="subfilter hidden">
          <label for="filtroLinea">
            ğŸš Linea:
            <select id="filtroLinea" name="filtroLinea">
              <option value="all">Tutte le linee</option>
              <!-- Le opzioni verranno popolate dinamicamente -->
            </select>
          </label>
          <div class="time-filters">
            <label for="filtroOraInizio">
              ğŸ• Da:
              <input type="time" id="filtroOraInizio" name="filtroOraInizio">
            </label>
            <label for="filtroOraFine">
              ğŸ• A:
              <input type="time" id="filtroOraFine" name="filtroOraFine">
            </label>
          </div>
        </div>
      </li>

      <li>
        <label for="filtroTraffico">
          <input type="checkbox" id="filtroTraffico" name="filtroTraffico">
          ğŸš— Traffico in Tempo Reale
        </label>
      </li>
    </ul>
      
    <!-- Pannello info traffico -->
    <div id="traffic-info" class="traffic-info" style="display: none;">
      <h4>ğŸ“Š Stato Traffico</h4>
      <div id="traffic-summary"></div>
      <small id="traffic-last-update"></small>
    </div>
    
    <!-- Pannello info trasporti -->
    <div id="transport-info" class="transport-info" style="display: none;">Add commentMore actions
      <h4>ğŸšŒ Info Trasporti</h4>
      <div id="transport-summary"></div>
      <small>ğŸ’¡ Le fermate sono visibili solo con zoom elevato</small>
    </div>

    </div>
  </div>
  
  <div class="map">
    <h3>Mappa</h3>
    <div class="box-container">
      <div class="map-container">
      <div id="leaflet-map"></div>
    </div>
    </div>
  </div>

  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />   
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.8.0/proj4.js"></script> 
  
  <script src="/js/map/leaflet-heat.js"></script>
  <script src="/js/map/utils.js"></script>
  <script src="/js/map/draw-tratti.js"></script>
  <script src="/js/map/canvas-overlay.js"></script>
  <script src="/js/map/map-traffico.js"></script>
  <script src="/js/map/map-trasporti.js"></script>
  <script src="/js/map/map-loader.js"></script>
  <script src="/js/map/main.js"></script>

</div>
